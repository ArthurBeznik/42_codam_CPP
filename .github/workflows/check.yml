name: Ubuntu Compilation

on:
  push:
    branches: [ "master" ]

env:
  DIR: 00 01 02
  EXO: ex00 ex01 ex02 ex03 ex04 ex05
  CC: c++
  MAKE: make

jobs:
  check-c98:
    name: Compiling using ubuntu
    runs-on: ubuntu-latest
    continue-on-error: true
    steps:
      - name: Checkout repo
        uses: actions/checkout@master
        with:
          fetch-depth: 3
      - name: Build makefiles
        # if: always()
        if: ${{ success() || failure() }}
        run: |
          for i in ${{ env.DIR }}; do
            for n in ${{ env.EXO }}; do
              if [[ -f ${i}/${n}/Makefile ]]; then
                make -k re -C ${i}/${n}
              fi
            done
          done
